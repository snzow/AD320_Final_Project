{"version":3,"sources":["index.js"],"names":["document","addEventListener","window","location","pathname","endsWith","getElementById","handleLogin","prefillUsername","localStorage","getItem","style","display","reserveBandElement","checkLoginAndRedirect","fetchBands","fetch","then","response","json","bands","bandsList","forEach","band","bandDiv","createElement","innerHTML","concat","name","description","showBandDetails","id","appendChild","catch","error","console","event","preventDefault","username","value","password","setItem","userType","href","alert","savedUsername","showReservationForm","reservationSection","bandId","bandDetails","handleReservation","time","venueId","reservationData","parseInt","method","headers","body","JSON","stringify","data","success","reservationId"],"mappings":"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","file":"public.e31bb0bc.js","sourceRoot":"..","sourcesContent":["\r\n\"use strict\";\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    if (window.location.pathname.endsWith('login.html')) {\r\n        document.getElementById('login-form').addEventListener('submit', handleLogin);\r\n        prefillUsername(); // Prefill the username if it's saved in localStorage\r\n    } else {\r\n        // Show the main page\r\n\r\n// Show band availability section for band users\r\nif (localStorage.getItem('userType') === 'band') {\r\n    document.getElementById('band-availability').style.display = 'block';\r\n} else {\r\n    document.getElementById('band-availability').style.display = 'none';\r\n    const reserveBandElement = document.getElementById('reserve-band'); // Replace with lement ID\r\n    if (reserveBandElement) {\r\n        reserveBandElement.addEventListener('click', checkLoginAndRedirect);\r\n    }\r\n}\r\n\r\n        fetchBands();\r\n    }\r\n    \r\n});\r\n\r\nfunction fetchBands() {\r\n    fetch('/api/bands')\r\n        .then(response => response.json())\r\n        .then(bands => {\r\n            const bandsList = document.getElementById('bands-list');\r\n            bands.forEach(band => {\r\n                const bandDiv = document.createElement('div');\r\n                bandDiv.innerHTML = `<h3>${band.name}</h3><p>${band.description}</p>`;\r\n                bandDiv.addEventListener('click', () => showBandDetails(band.id));\r\n                bandsList.appendChild(bandDiv);\r\n            });\r\n        })\r\n        .catch(error => {\r\n            console.error('Error fetching bands:', error);\r\n        });\r\n}\r\n\r\nfunction handleLogin(event) {\r\n    event.preventDefault();\r\n    const username = document.getElementById('username').value;\r\n    const password = document.getElementById('password').value;\r\n\r\n    // Test if the username and password match the specific credentials\r\n    if (username === 'Alice' && password === '1234') {\r\n        // Perform the login actions\r\n        localStorage.setItem('username', username);\r\n        const userType = document.getElementById('userType').value;\r\n        localStorage.setItem('userType', userType);\r\n        \r\n        // Redirect to main page or show success message\r\n        window.location.href = 'index.html'; // Redirect to the main page after login\r\n    } else {\r\n        // Handle login failure\r\n        alert('Login failed. Please try again.');\r\n    }\r\n}\r\n\r\n    /* \r\n    event.preventDefault();\r\n    const username = document.getElementById('username').value;\r\n    const password = document.getElementById('password').value;\r\n\r\n    // Saving username to localStorage\r\n    localStorage.setItem('username', username);\r\n    const userType = document.getElementById('userType').value;\r\n    localStorage.setItem('userType', userType);\r\n\r\n    // Replace with your API endpoint\r\n    fetch('/api/login', {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ username, password })\r\n    })\r\n    .then(response => response.json())\r\n    .then(data => {\r\n        if (data.success) {\r\n            // Handle successful login\r\n            // Redirect to main page or show success message\r\n            window.location.href = 'index.html'; // Redirect to the main page after login\r\n        } else {\r\n            // Handle login failure\r\n            alert('Login failed. Please try again.');\r\n        }\r\n    })\r\n    .catch(error => {\r\n        console.error('Error during login:', error);\r\n        alert('An error occurred while attempting to log in.');\r\n    });\r\n*/\r\n\r\nfunction prefillUsername() {\r\n    const savedUsername = localStorage.getItem('username');\r\n    if (savedUsername) {\r\n        document.getElementById('username').value = savedUsername;\r\n    }\r\n}\r\n\r\nfunction checkLoginAndRedirect(event) {\r\n    event.preventDefault(); // Prevent default action if it's a link\r\n\r\n    // Check if user is logged in\r\n    if (localStorage.getItem('username')) {\r\n        window.location.href = 'reserve.html'; // Redirect to reservation page\r\n    } else {\r\n        window.location.href = 'login.html'; // Redirect to login page\r\n    }\r\n}\r\n\r\nfunction showReservationForm() {\r\n    // Logic to show reservation form after successful login\r\n    const reservationSection = document.getElementById('reserve');\r\n    if (localStorage.getItem('userType') === 'venue') {\r\n    reservationSection.style.display = 'block';\r\n} else {\r\n    reservationSection.style.display = 'none';\r\n}\r\n    // Populate reservation form fields as necessary\r\n}\r\n\r\nfunction showBandDetails(bandId) {\r\n    fetch(`/api/bands/${bandId}`)\r\n        .then(response => response.json())\r\n        .then(bandDetails => {\r\n            // Display band details in a specific section or modal\r\n        })\r\n        .catch(error => {\r\n            console.error('Error fetching band details:', error);\r\n        });\r\n}\r\n\r\ndocument.getElementById('reservation-form').addEventListener('submit', handleReservation);\r\n\r\nfunction handleReservation(event) {\r\n    event.preventDefault();\r\n    \r\n    const time = document.getElementById('time').value;\r\n    const venueId = document.getElementById('venueId').value;\r\n    const bandId = document.getElementById('bandId').value;\r\n    \r\n    // Constructing the reservation data object\r\n    const reservationData = {\r\n        time: time,\r\n        venueId: parseInt(venueId, 10),  // Convert to integer as your database expects an INTEGER\r\n        bandId: parseInt(bandId, 10)     // Convert to integer\r\n    };\r\n\r\n    // API call to reserve a band\r\n    fetch('/api/reserve', {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(reservationData)\r\n    })\r\n    .then(response => response.json())\r\n    .then(data => {\r\n        if (data.success) {\r\n            // Handle successful reservation\r\n            alert(`Reservation confirmed! Confirmation ID: ${data.reservationId}`);\r\n            // Optionally, clear the form or redirect the user\r\n        } else {\r\n            // Handle reservation failure\r\n            alert('Reservation failed. Please try again.');\r\n        }\r\n    })\r\n    .catch(error => {\r\n        console.error('Error making reservation:', error);\r\n        alert('An error occurred while making the reservation.');\r\n    });\r\n}\r\n"]}